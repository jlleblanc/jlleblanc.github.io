<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-gb" lang="en-gb">

<head>
  <base href="" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="robots" content="index, follow" />
  <meta name="keywords" content="joomla, Joomla" />
  <meta name="title" content="Daily Message with E-mail - Page 3" />
  <meta name="author" content="" />
  <meta name="description" content="i like code." />
  <meta name="generator" content="Joomla! 1.5 - Open Source Content Management" />
  <title>Daily Message with E-mail - Page 3</title>
  <link href="http://jlleblanc.com/templates/blueprint/favicon.ico" rel="shortcut icon" type="image/x-icon" />
  <script type="text/javascript" src="http://jlleblanc.com/media/system/js/mootools.js"></script>
  <script type="text/javascript" src="http://jlleblanc.com/media/system/js/caption.js"></script>


<link rel="stylesheet" href="http://jlleblanc.com/templates/blueprint/css/blueprint/screen.css" type="text/css" media="screen, projection" />
<link rel="stylesheet" href="http://jlleblanc.com/templates/blueprint/css/blueprint/print.css" type="text/css" media="print" />
<!--[if lt IE 8]>
  <link rel="stylesheet" href="/templates/blueprint/css/blueprint/ie.css" type="text/css" media="screen, projection">
<![endif]-->
<link rel="stylesheet" href="http://jlleblanc.com/templates/blueprint/css/template.css" type="text/css" media="screen" />

<link rel="stylesheet" href="http://jlleblanc.com/templates/blueprint/dailymessage/dailymessage.css" type="text/css" media="screen" />
<script language="javascript" type="text/javascript" src="http://jlleblanc.com/templates/blueprint/dailymessage/jquery-latest.pack.js"></script>
<script type="text/javascript" charset="utf-8">
	jQuery.noConflict();
</script>
<script language="javascript" type="text/javascript" src="http://jlleblanc.com/templates/blueprint/dailymessage/dailymessage.js"></script>
</head>

<body>
	<div class="container" id="top_module">
		
	</div>
	<div id="logo"><img src="http://jlleblanc.com/templates/blueprint/img/jlleblanc.png" /></div>
	<div class="container">
		<div class="column span-6">
					<div class="moduletable_menu">
					<ul class="menu"><li class="item71"><a href="../index.html"><span>home</span></a></li><li class="item51"><a href="../joomla"><span>joomla</span></a></li><li class="item61"><a href="http://www.designvsdevelop.com"><span>blog</span></a></li><li class="item75"><a href="http://www.extool.org"><span>extool</span></a></li><li class="item72"><a href="../ministries"><span>ministries</span></a></li></ul>		</div>
			<div class="moduletable">
					<h3>Joomla Resources</h3>
					<ul class="menu"><li class="item52"><a href="../articles"><span>articles</span></a></li><li id="current" class="active item54"><a href="../tutorials"><span>tutorials</span></a></li><li class="item73"><a href="../podcast-suite"><span>podcast suite</span></a></li><li class="item76"><a href="../joomladay-giveaway"><span>joomladay giveaway</span></a></li></ul>		</div>
	
		</div>
		<div class="column last span-18">
			
<div id="page">



<h2 class="contentheading">
	Daily Message with E-mail - Page 3</h2>



<p class="buttonheading">
	</p>





	<table cellpadding="0" cellspacing="0" class="contenttoc">
	<tr>
		<th>Article Index</th>
	</tr>
	
	<tr>
		<td>
		<a href="22-daily-message-with-e-mail" class="toclink">Daily Message with E-mail</a>
		</td>
	</tr>
	
			<tr>
				<td>
				<a href="22-daily-message-with-e-mail?start=1" class="toclink">Page 2</a>
				</td>
			</tr>
			
			<tr>
				<td>
				<a href="22-daily-message-with-e-mail?start=2" class="toclink active">Page 3</a>
				</td>
			</tr>
			
		<tr>
			<td>
				<a href="22-daily-message-with-e-mail?showall=1" class="toclink">All Pages</a>
			</td>
		</tr>
		</table>
<div class="pagenavcounter">Page 3 of 3</div><br /><h1>dailymessage.html.php</h1>&lt;?<br /><br /><span style="color: rgb(0, 153, 0);">defined( '_VALID_MOS' ) or die( 'Direct Access to this location is not allowed.' );</span><br /><br />Access outside of Mambo is disallowed here.<br /><br /><span style="color: rgb(0, 153, 0);">class dailymessage_HTML {</span><br /><br />This class contains a series of functions handling the component's output. Queries have been avoided and variables are passed instead. <br /><br /><span style="color: rgb(0, 153, 0);">function FillAllFields()</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">{</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">&nbsp;&nbsp;&nbsp; ?&gt;&lt;center&gt;&lt;font color=&quot;#FF0000&quot;&gt;Please fill in all of the fields.&lt;/font&gt;&lt;/center&gt;&lt;?</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">}</span><br /><br />FillAllFields displays a message when the visitor has not given enough information to send a mailing.<br /><br /><br /><span style="color: rgb(0, 153, 0);">function Success()</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">{</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">&nbsp;&nbsp;&nbsp; ?&gt;</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;center&gt;&lt;b&gt;Message sent successfully.&lt;/b&gt;&lt;BR&gt;&lt;BR&gt;</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;input type=&quot;button&quot; value=&quot;Close&quot; class=&quot;button&quot; onClick=&quot;{window.close();}&quot;&gt;</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/center&gt;</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">&nbsp;&nbsp;&nbsp; &lt;?</span><br style="color: rgb(0, 153, 0);" /><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">} </span><br /><br />Once an e-mail has been successfully sent, this function displays the success message and provides a button for closing the window.<br /><br /><br /><span style="color: rgb(0, 153, 0);">function EmailForm($option, $id, $sendername, $emailfrom, $emailto, $note)</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">{</span><br style="color: rgb(0, 153, 0);" /><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ?&gt;</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;form action=&quot;index2.php&quot; method=&quot;post&quot;&gt;</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;table&gt;</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;tr&gt;&lt;td colspan=&quot;2&quot; align=&quot;center&quot;&gt;Send this message&lt;/td&gt;&lt;/tr&gt;</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;tr&gt;&lt;td align=&quot;left&quot;&gt;Your Name:&lt;/td&gt; &lt;td&gt;&lt;input name=&quot;sendername&quot; value=&quot;&lt;? echo $sendername; ?&gt;&quot;&gt;&lt;/td&gt;&lt;/tr&gt;</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;tr&gt;&lt;td align=&quot;left&quot;&gt;Your e-mail:&lt;/td&gt; &lt;td&gt;&lt;input name=&quot;emailfrom&quot; value=&quot;&lt;? echo $emailfrom; ?&gt;&quot;&gt;&lt;/td&gt;&lt;/tr&gt;</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;tr&gt;&lt;td align=&quot;left&quot;&gt;Your friend's e-mail:&lt;/td&gt; &lt;td&gt;&lt;input name=&quot;emailto&quot; value=&quot;&lt;? echo $emailto; </span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">?&gt;&quot;&gt;&lt;/td&gt;&lt;/tr&gt;</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;tr&gt;&lt;td align=&quot;left&quot;&gt;An additional note (optional):&lt;/td&gt; &lt;td&gt;&lt;textarea name=&quot;note&quot; rows=&quot;5&quot; cols=&quot;30&quot;&gt;</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">&lt;? echo $note; ?&gt;&lt;/textarea&gt;&lt;/td&gt;&lt;/tr&gt;</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;tr&gt;&lt;td colspan=&quot;2&quot; align=&quot;center&quot;&gt;&lt;input type=&quot;submit&quot; value=&quot;Send Message&quot; class=&quot;button&quot;&gt;&nbsp;</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">&lt;input type=&quot;button&quot; value=&quot;Cancel&quot; class=&quot;button&quot; onClick=&quot;{window.close();}&quot;&gt;&lt;/td&gt;&lt;/tr&gt;</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/table&gt;</span><br /><br />Fields on this form are populated by previously entered values, when present. If the visitor omits an essential value, repeated data entry will not be necessary. Submit and Cancel buttons are also generated.<br /><br /><span style="color: rgb(0, 153, 0);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;input type=&quot;hidden&quot; name=&quot;id&quot; value=&quot;&lt;? echo $id; ?&gt;&quot;&gt;</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;input type=&quot;hidden&quot; name=&quot;task&quot; value=&quot;sendemail&quot;&gt;</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;input type=&quot;hidden&quot; name=&quot;option&quot; value=&quot;&lt;? echo $option; ?&gt;&quot;&gt;</span><br /><br />The 'option' variable tells Mambo which component to load, while 'task' is used within dailymessage.php. To ensure the correct Daily Message loads the correct message, the 'id' variable is set to the appropriate database row number.<br /><br /><span style="color: rgb(0, 153, 0);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/form&gt;</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;?</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">} </span><br /><br /><br /><span style="color: rgb(0, 153, 0);">function ListMessages($option, $bold, $italic, $underline, $showdate, $starttags, $endtags, &amp;$rows)</span><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 153, 0);">{</span><br style="color: rgb(0, 153, 0);" /><br style="color: rgb(0, 153, 0);" /><span style="color: rgb(0, 0, 255);">?&gt;&lt;table&gt;&lt;?</span><br /><br /><br /><span style="color: rgb(0, 0, 255);">foreach($rows as $row)</span><br style="color: rgb(0, 0, 255);" /><span style="color: rgb(0, 0, 255);">{</span><br /><span style="color: rgb(0, 102, 0);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $button = &quot;&lt;a href=\&quot;#\&quot; onClick=\&quot;javascript:{ window.open('index2.php?option=$option&amp;task=emailform&amp;id=&quot; . $row-&gt;id . &quot;', 'emailform', 'height=350,width=400'); }\&quot;&gt;&lt;img src=\&quot;images/M_images/emailButton.png\&quot; border=\&quot;0\&quot;&gt;&lt;/a&gt;&quot;;</span><br /><br />Although most of the code for this function has been copied directly out of the original dailymessage.php file, the &quot;email-a-friend&quot; link is new. The code is set to open a pop-up window and load the current component, but using the index2.php file. Instead of loading a fully-featured page with modules, index2.php loads the CSS file for the current template, then loads the component output. This allows for a consistent look and feel, while providing space within a visually small area. The image used is part of a standard Mambo installation.<br /><br /><span style="color: rgb(0, 0, 255);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if($showdate == 1)</span><br style="color: rgb(0, 0, 255);" /><span style="color: rgb(0, 0, 255);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo &quot;&lt;tr&gt;&lt;td&gt;&quot; . mosFormatDate($row-&gt;date) . &quot;&lt;/td&gt;&quot;;</span><br style="color: rgb(0, 0, 255);" /><span style="color: rgb(0, 0, 255);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; else</span><br style="color: rgb(0, 0, 255);" /><span style="color: rgb(0, 0, 255);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo &quot;&lt;tr&gt;&quot;;</span><br /><br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: rgb(0, 0, 255);">echo &quot;&lt;td&gt;&quot; . $starttags . $row-&gt;message . $endtags .</span> <span style="color: rgb(0, 102, 0);">&quot;&nbsp;&quot; . $button . </span><span style="color: rgb(0, 0, 255);">&quot;&lt;/td&gt;&lt;/tr&gt;&quot;;</span><br /><br />This portion of code is identical to the original location in dailymessage.php, except that a forced space and the e-mail button have been added.<br /><br /><span style="color: rgb(0, 102, 0);">}</span><br style="color: rgb(0, 102, 0);" /><br style="color: rgb(0, 102, 0);" /><span style="color: rgb(0, 102, 0);">?&gt;&lt;/table&gt;&lt;?</span><br /><br />} <br /><br />} // class dailymessage_HTML<br /><br />?&gt;<br /><br />Download a copy of the new component <a href="../com_dailymessage_email.zip">here</a>. This will not interfere with any of the other Daily Message tutorials.<br /><br /><div class="pagenavbar"><div><a href="22-daily-message-with-e-mail?start=1">&lt;&lt; Prev</a> - Next</div></div><br />

</div>

		</div>
	</div>
	<div class="container">
		
	</div>
</body>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-2258922-1";
urchinTracker();
</script>
</html>
